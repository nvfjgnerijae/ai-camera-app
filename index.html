<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <link rel="manifest" href="/manifest.json">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>AI Camera</title>
  <link rel="stylesheet" href="./src/style.css">
</head>

<body>
  <div id="app">
    <!-- Camera View -->
    <section id="camera-view" class="view active">
      <div id="flash-overlay" class="flash-overlay"></div>
      <video id="camera-feed" autoplay playsinline muted></video>

      <div class="camera-controls">
        <button id="btn-switch-camera" class="icon-btn" aria-label="カメラ切り替え">
          <!-- Refresh CW Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" />
            <path d="M21 3v5h-5" />
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" />
            <path d="M8 16H3v5" />
          </svg>
        </button>

        <button id="btn-shutter" class="shutter-btn" aria-label="撮影"></button>

        <div class="spacer"></div> <!-- Spacer to balance layout -->
      </div>
    </section>

    <!-- Editor View -->
    <section id="editor-view" class="view hidden">
      <div class="editor-container">
        <div class="image-wrapper">
          <img id="capture-image" src="" alt="Captured">
          <canvas id="drawing-canvas"></canvas>
        </div>
      </div>

      <div class="editor-controls-top">
        <button id="btn-retake" class="text-btn">撮り直し</button>
        <div class="tools">
          <button id="btn-undo" class="icon-btn" aria-label="元に戻す" disabled>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 7v6h6" />
              <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13" />
            </svg>
          </button>

          <button id="btn-mode-crop" class="icon-btn active" aria-label="切り取り">
            <!-- Crop Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 2v14a2 2 0 0 0 2 2h14" />
              <path d="M18 22V8a2 2 0 0 0-2-2H2" />
            </svg>
          </button>
          <button id="btn-mode-draw" class="icon-btn" aria-label="描画">
            <!-- Pen Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z" />
            </svg>
          </button>

          <button id="btn-redo" class="icon-btn" aria-label="やり直し" disabled>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 7v6h-6" />
              <path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 3.7" />
            </svg>
          </button>
        </div>

        <div class="draw-colors hidden" id="draw-colors">
          <button class="color-btn" data-color="#ff3b30" style="background-color: #ff3b30;"></button>
          <button class="color-btn" data-color="#ffffff" style="background-color: #ffffff;"></button>
          <button class="color-btn" data-color="#000000"
            style="background-color: #000000; border: 1px solid #333;"></button>
        </div>
      </div>

      <div class="editor-controls-bottom">
        <button id="btn-copy" class="primary-btn">
          <!-- Copy Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            style="margin-right: 8px;">
            <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
            <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
          </svg>
          コピーして完了
        </button>
      </div>
    </section>

    <!-- Toast/Notification -->
    <div id="toast" class="toast hidden">クリップボードにコピーしました</div>
  </div>
  <script type="module" src="/src/main.js"></script>
</body>

</html>